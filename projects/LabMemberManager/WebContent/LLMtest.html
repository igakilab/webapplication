<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>LabMemberManagerテストページ</title>

	<script type="text/javascript" src="dwr/engine.js"></script>
    <script type="text/javascript" src="dwr/util.js"></script>
    <script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
    <script type="text/javascript" src="js/jquery.serialize.js"></script>
    <script type="text/javascript" src="dwr/interface/LmmManager.js"></script>
    <script>
    	function sendLogin(){
    		var uname = $("#input_name").val();
    		LmmManager.login(uname, {
    			callback: function(resp){
    				$("#login_status").text(resp);
    			}
    		});
    	}

    	function get_list(){
    		LmmManager.getMemberList({
    			callback: function(data){
    				show_list(data);
    			}
    		});
    	}

    	function show_list(list){
    		var nrow;

    		$("#MemberList").text("");

    		nrow = $("<tr></tr>");
    		nrow.append($("<td></td>").text("NAME"));
    		nrow.append($("<td></td>").text("STATE"));
    		nrow.append($("<td></td>").text("LOGIN"));
    		nrow.append($("<td></td>").text("UPDATE"));
    		$("#MemberList").append(nrow);

    		for(var i=0; i<list.length; i++){
    			nrow = $("<tr></tr>");
    			nrow.append($("<td></td>").text(list[i].name));
    			nrow.append($("<td></td>").text(list[i].stateStr));
    			nrow.append($("<td></td>").text(list[i].loginDate));
    			nrow.append($("<td></td>").text(list[i].updateDate));

    			$("#MemberList").append(nrow);
    		}
    	}

    </script>
</head>

<body>
	<h3>LabMemberManagerテストページ</h3>
	<hr>
	<p>サインイン情報を登録する</p>
	<input id="input_name" type="text"></input>
	<button type="button" onclick="sendLogin()">送信</button>
	<div id="login_status"></div>
	<hr>
	<p>現在のメンバーリストを確認する</p>
	<button type="button" onclick="get_list()">取得</button>
	<table id="MemberList" border="1"></table>
	<div id="raw_data"></div>
	</body>
</html>
